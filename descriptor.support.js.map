{"version":3,"sources":["descriptor.support.js"],"names":["falzy","require","kein","DESCRIPTOR","ENTITY","PROPERTY","TYPE","Descriptor","property","entity","Error","describe","descriptor","error","value","get","self","privateProperty","set","configurable","enumerable","writable","module","exports"],"mappings":"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","file":"descriptor.support.js","sourcesContent":["\"use strict\";\n\n/*;\n\t@submodule-license:\n\t\tThe MIT License (MIT)\n\t\t@mit-license\n\n\t\tCopyright (@c) 2017 Richeve Siodina Bebedor\n\t\t@email: richeve.bebedor@gmail.com\n\n\t\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\t\tof this software and associated documentation files (the \"Software\"), to deal\n\t\tin the Software without restriction, including without limitation the rights\n\t\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t\tcopies of the Software, and to permit persons to whom the Software is\n\t\tfurnished to do so, subject to the following conditions:\n\n\t\tThe above copyright notice and this permission notice shall be included in all\n\t\tcopies or substantial portions of the Software.\n\n\t\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\t\tSOFTWARE.\n\t@end-submodule-license\n\n\t@submodule-configuration:\n\t\t{\n\t\t\t\"package\": \"dscrb\",\n\t\t\t\"path\": \"dscrb/descriptor.module.js\",\n\t\t\t\"file\": \"descriptor.module.js\",\n\t\t\t\"module\": \"dscrb\",\n\t\t\t\"author\": \"Richeve S. Bebedor\",\n\t\t\t\"eMail\": \"richeve.bebedor@gmail.com\",\n\t\t\t\"contributors\": [\n\t\t\t\t\"John Lenon Maghanoy <johnlenonmaghanoy@gmail.com>\",\n\t\t\t\t\"Vinse Vinalon <vinsevinalon@gmail.com>\"\n\t\t\t],\n\t\t\t\"repository\": \"https://github.com/volkovasystems/dscrb.git\",\n\t\t\t\"test\": \"dscrb-test.js\",\n\t\t\t\"class\": true,\n\t\t\t\"global\": false\n\t\t}\n\t@end-submodule-configuration\n\n\t@submodule-documentation:\n\t\tDescriptor class wrapper.\n\n\t\tThis class will be used to augment the descriptor structure.\n\t\tThis will be used to just get values from the descriptor.\n\n\t\tThis will make the data and accessor descriptor as one.\n\t@end-submodule-documentation\n\n\t@include:\n\t\t{\n\t\t\t\"falzy\": \"falzy\",\n\t\t\t\"kein\": \"kein\"\n\t\t}\n\t@end-include\n*/\n\nconst falzy = require( \"falzy\" );\nconst kein = require( \"kein\" );\n\nconst DESCRIPTOR = Symbol( \"descriptor\" );\nconst ENTITY = Symbol( \"entity\" );\nconst PROPERTY = Symbol( \"property\" );\nconst TYPE = Symbol( \"type\" );\n\nclass Descriptor {\n\tconstructor( property, entity ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"property:required\": [\n\t\t\t\t\t\t\"number\"\n\t\t\t\t\t\t\"string\",\n\t\t\t\t\t\t\"symbol\"\n\t\t\t\t\t],\n\t\t\t\t\t\"entity\": \"*\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif(\n\t\t\tfalzy( property )\n\t\t\t|| (\n\t\t\t\ttypeof property != \"number\"\n\t\t\t\t&& typeof property != \"string\"\n\t\t\t\t&& typeof property != \"symbol\"\n\t\t\t)\n\t\t){\n\t\t\tthrow new Error( \"invalid property\" );\n\t\t}\n\n\t\tif( falzy( entity ) ){\n\t\t\tthrow new Error( \"invalid entity\" );\n\t\t}\n\n\t\tif( !kein( property, entity ) ){\n\t\t\tthrow new Error( \"property does not exists\" );\n\t\t}\n\n\t\tthis[ PROPERTY ] = property;\n\t\tthis[ ENTITY ] = entity;\n\n\t\tthis.describe( );\n\t}\n\n\tdescribe( ){\n\t\tif( this[ DESCRIPTOR ] ){\n\t\t\treturn this[ DESCRIPTOR ];\n\t\t}\n\n\t\tlet descriptor = { };\n\t\ttry{\n\t\t\tdescriptor = Object.getOwnPropertyDescriptor( this[ ENTITY ], this[ PROPERTY ] );\n\n\t\t}catch( error ){ }\n\n\t\tlet value = this[ ENTITY ][ this[ PROPERTY ] ];\n\t\tif( typeof value == \"undefined\" ){\n\t\t\tvalue = descriptor.value;\n\t\t}\n\n\t\tif(\n\t\t\ttypeof value == \"undefined\"\n\t\t\t&& typeof descriptor.get == \"function\"\n\t\t){\n\t\t\tvalue = descriptor.get( );\n\t\t}\n\n\t\tlet self = this;\n\t\tlet privateProperty = Symbol( `-${ this[ PROPERTY ] }` );\n\n\t\tlet get = descriptor.get;\n\t\tif( typeof get != \"function\" ){\n\t\t\tget = function get( ){\n\t\t\t\treturn self[ ENTITY ][ privateProperty ];\n\t\t\t}\n\t\t}\n\n\t\tlet set = descriptor.set;\n\t\tif( typeof set != \"function\" ){\n\t\t\tset = function set( value ){\n\t\t\t\tself[ ENTITY ][ privateProperty ] = value;\n\n\t\t\t\treturn self[ ENTITY ];\n\t\t\t};\n\t\t}\n\n\t\t/*;\n\t\t\t@note:\n\t\t\t\tAll property values are configurable unless stated and/or\n\t\t\t\t\tthe entity is not frozen or sealed.\n\t\t\t@end-note\n\t\t*/\n\t\tlet configurable = descriptor.configurable;\n\t\tif( typeof configurable != \"boolean\" ){\n\t\t\tconfigurable = !Object.isFrozen( this[ ENTITY ] ) && !Object.isSealed( this[ ENTITY ] );\n\t\t}\n\n\t\t/*;\n\t\t\t@note:\n\t\t\t\tAll property values are enumerable by default unless,\n\t\t\t\t\tthe property is stated as false or the property is a symbol.\n\t\t\t@end-note\n\t\t*/\n\t\tlet enumerable = descriptor.enumerable;\n\t\tif( typeof this[ PROPERTY ] == \"symbol\" ){\n\t\t\tenumerable = false;\n\t\t}\n\n\t\tif( typeof enumerable != \"boolean\" ){\n\t\t\tenumerable = true;\n\t\t}\n\n\t\t/*;\n\t\t\t@note:\n\t\t\t\tIf the writable property does not exist, it is false by default\n\t\t\t\t\twhich means the descriptor is an accessor descriptor\n\t\t\t\t\tand you cannot simply assign a value without calling\n\t\t\t\t\tthe setter method which implies that it is not writable\n\t\t\t\t\tin a sense that writability semantics requires direct\n\t\t\t\t\tvalue assignment.\n\t\t\t@end-note\n\t\t*/\n\t\tlet writable = descriptor.writable;\n\t\tif( typeof writable != \"boolean\" ){\n\t\t\twritable = false;\n\t\t}\n\n\t\tthis[ DESCRIPTOR ] = Object.freeze( {\n\t\t\t\"value\": value,\n\n\t\t\t\"get\": get,\n\t\t\t\"set\": set,\n\n\t\t\t\"configurable\": configurable,\n\t\t\t\"enumerable\": enumerable,\n\t\t\t\"writable\": writable\n\t\t} );\n\n\t\treturn this[ DESCRIPTOR ];\n\t}\n\n\tget( ){\n\t\treturn this[ DESCRIPTOR ].get;\n\t}\n\n\tset( ){\n\t\treturn this[ DESCRIPTOR ].set;\n\t}\n\n\tvalue( ){\n\t\treturn this[ DESCRIPTOR ].value;\n\t}\n\n\twritable( ){\n\t\treturn this[ DESCRIPTOR ].writable;\n\t}\n\n\tconfigurable( ){\n\t\treturn this[ DESCRIPTOR ].configurable;\n\t}\n\n\tenumerable( ){\n\t\treturn this[ DESCRIPTOR ].enumerable;\n\t}\n\n\tget descriptor( ){\n\t\ttry{\n\t\t\treturn Object.freeze( Object.getOwnPropertyDescriptor( this[ ENTITY ], this[ PROPERTY ] ) );\n\n\t\t}catch( error ){\n\t\t\treturn Object.freeze( { } );\n\t\t}\n\t}\n}\n\nmodule.exports = Descriptor;\n"]}